# Libera App - AI ê¸°ë°˜ PDF ì„±ì  ë¶„ì„ ì‹œìŠ¤í…œ
ì´ ë‚´ìš©ì€ cursorê°€ ì½”ë“œê¸°ë°˜ìœ¼ë¡œ ì‘ì„±í•´ì¤€ê²ƒì…ë‹ˆë‹¤..
í…ŒìŠ¤íŠ¸ëŠ” http://34.64.69.99:8001/docs
ì—¬ê¸°ì„œ 15ë²ˆ í•™ìƒ ì¡°íšŒë¥¼ í•´ë³´ì‹œë©´ ë©ë‹ˆë‹¤!
ë‹¤ë§Œ.. ì•„ì§ êµ¬í˜„ì´ ëœ ëœ ë¶€ë¶„ì´ ìˆì–´ì„œ ëª¨ë‘ ë™ì‘í•˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤.

## ğŸ“‹ ëª©ì°¨

- [ì‹œìŠ¤í…œ ê°œìš”](#ì‹œìŠ¤í…œ-ê°œìš”)
- [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
- [ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°](#ë°ì´í„°ë² ì´ìŠ¤-êµ¬ì¡°)
- [API ì•„í‚¤í…ì²˜](#api-ì•„í‚¤í…ì²˜)
- [ì„¤ì¹˜ ë° ì‹¤í–‰](#ì„¤ì¹˜-ë°-ì‹¤í–‰)
- [API ë¬¸ì„œ](#api-ë¬¸ì„œ)
- [í”„ë¡œì íŠ¸ êµ¬ì¡°](#í”„ë¡œì íŠ¸-êµ¬ì¡°)
- [ê°œë°œ ê°€ì´ë“œ](#ê°œë°œ-ê°€ì´ë“œ)
- [ë°°í¬ ê°€ì´ë“œ](#ë°°í¬-ê°€ì´ë“œ)

## ğŸ¯ ì‹œìŠ¤í…œ ê°œìš”

### ì£¼ìš” ê¸°ëŠ¥

#### ğŸ“„ PDF ì²˜ë¦¬ ë° ë¶„ì„
- **ë©€í‹° í¬ë§· PDF ì§€ì›**: ë‹¤ì–‘í•œ í˜•íƒœì˜ PDF ë¬¸ì„œ ì—…ë¡œë“œ ë° íŒŒì‹±
- **AI ê¸°ë°˜ ë°ì´í„° ì¶”ì¶œ**: Google Generative AIë¥¼ í™œìš©í•œ ì§€ëŠ¥í˜• í…ìŠ¤íŠ¸ ë¶„ì„
- **ìë™ ë°ì´í„° ë¶„ë¥˜**: í•™ìƒ ì •ë³´, ì„±ì , ì¶œì„ ë°ì´í„° ìë™ ë¶„ë¥˜ ë° ì •ê·œí™”
- **ë¹„ë™ê¸° PDF ì²˜ë¦¬**: ëŒ€ìš©ëŸ‰ PDF íŒŒì¼ì˜ íš¨ìœ¨ì ì¸ ë³‘ë ¬ ì²˜ë¦¬

#### ğŸ‘¥ í•™ìƒ ì •ë³´ ê´€ë¦¬
- **ê°œì¸ì •ë³´ ê´€ë¦¬**: í•™ë²ˆ, ì´ë¦„, ìƒë…„ì›”ì¼, ì—°ë½ì²˜ ë“± ê¸°ë³¸ ì •ë³´
- **í•™ê¸‰/í•™êµ ì´ë ¥**: ì¬í•™ í•™êµ ë° í•™ê¸‰ ì •ë³´ ê´€ë¦¬
- **í†µí•© ê²€ìƒ‰**: ë‹¤ì–‘í•œ ì¡°ê±´ì„ í†µí•œ í•™ìƒ ê²€ìƒ‰ ë° í•„í„°ë§

#### ğŸ“Š ì„±ì  ë¶„ì„ ë° ê´€ë¦¬
- **ê³¼ëª©ë³„ ì„±ì  ì¶”ì **: êµê³¼, ê³¼ëª©ëª…, ì›ì ìˆ˜, ì„±ì·¨ë„ ë“± ìƒì„¸ ì •ë³´
- **í•™ê¸°ë³„ ì„±ì  ë¹„êµ**: ì‹œê°„ì— ë”°ë¥¸ ì„±ì  ë³€í™” ì¶”ì´ ë¶„ì„
- **í†µê³„ ë° ë¦¬í¬íŠ¸**: ê°œë³„/ì „ì²´ ì„±ì  í†µê³„ ë° ë¶„ì„ ë¦¬í¬íŠ¸
- **ë°ì´í„° ë‚´ë³´ë‚´ê¸°**: Excel, CSV í˜•íƒœë¡œ ì„±ì  ë°ì´í„° ë‚´ë³´ë‚´ê¸°

#### ğŸ” ë³´ì•ˆ ë° ì¸ì¦
- **JWT ê¸°ë°˜ ì¸ì¦**: ì•ˆì „í•œ í† í° ê¸°ë°˜ ì‚¬ìš©ì ì¸ì¦
- **ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´**: ì‚¬ìš©ì ê¶Œí•œì— ë”°ë¥¸ ì„¸ë¶„í™”ëœ ì ‘ê·¼ ì œì–´
- **ë°ì´í„° ì•”í˜¸í™”**: ë¯¼ê°í•œ ê°œì¸ì •ë³´ ë³´í˜¸

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### Backend Framework
- **FastAPI** (0.109.0) - ê³ ì„±ëŠ¥ ë¹„ë™ê¸° API í”„ë ˆì„ì›Œí¬
- **Python** (3.11+) - ì£¼ ê°œë°œ ì–¸ì–´
- **Uvicorn** - ASGI ì„œë²„

### Database & ORM
- **PostgreSQL** (13+) - ì£¼ ë°ì´í„°ë² ì´ìŠ¤ (ìš´ì˜í™˜ê²½)
- **SQLite** - ê°œë°œ/í…ŒìŠ¤íŠ¸ í™˜ê²½
- **SQLAlchemy 2.0** - ORM (ë¹„ë™ê¸° ì§€ì›)
- **AsyncPG** - PostgreSQL ë¹„ë™ê¸° ë“œë¼ì´ë²„
- **Alembic** - ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜

### AI & Document Processing
- **Google Generative AI** - í…ìŠ¤íŠ¸ ë¶„ì„ ë° ë°ì´í„° ì¶”ì¶œ
- **PDFPlumber** - PDF í…ìŠ¤íŠ¸ ì¶”ì¶œ
- **PyMuPDF** - PDF ë¬¸ì„œ ì²˜ë¦¬
- **OpenAI GPT** - ë³´ì¡° AI ë¶„ì„

### Data Processing
- **Pandas** - ë°ì´í„° ë¶„ì„ ë° ì²˜ë¦¬
- **NumPy** - ìˆ˜ì¹˜ ê³„ì‚°
- **OpenPyXL** - Excel íŒŒì¼ ì²˜ë¦¬

### Development & Testing
- **pytest** - í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬
- **Black** - ì½”ë“œ í¬ë§·í„°
- **MyPy** - íƒ€ì… ì²´í¬

## ğŸ—„ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°

### ERD (Entity Relationship Diagram)

```mermaid
erDiagram
    Student ||--o{ Score : has
    Student ||--o{ Attendance : has
    Student ||--o{ AcademicDetail : has
    Student ||--o{ SchoolHistory : has
    Student ||--o{ PDFMetadata : uploaded_by
    
    Student {
        int id PK
        string name
        date birth_date
        string gender
        string address
        string current_school_name
        string current_class_info
        datetime created_at
        datetime updated_at
    }
    
    Score {
        int id PK
        int student_id FK
        int grade
        int semester
        string curriculum
        string subject
        string subject_type
        string original_subject_name
        string raw_score
        string subject_average
        string standard_deviation
        string achievement_level
        string student_count
        string grade_rank
        int credit_hours
        datetime created_at
        datetime updated_at
    }
    
    Attendance {
        int id PK
        int student_id FK
        int grade
        int semester
        int absence_disease
        int absence_unexcused
        int tardiness_disease
        int tardiness_unexcused
        int early_leave_disease
        int early_leave_unexcused
        datetime created_at
        datetime updated_at
    }
    
    AcademicDetail {
        int id PK
        int student_id FK
        int grade
        int semester
        json detail_data
        datetime created_at
        datetime updated_at
    }
    
    SchoolHistory {
        int id PK
        int student_id FK
        int grade
        string school_name
        string class_info
        date start_date
        date end_date
        datetime created_at
        datetime updated_at
    }
    
    PDFMetadata {
        int id PK
        string original_filename
        string file_hash
        int file_size
        int page_count
        datetime upload_timestamp
        datetime processed_at
        string processing_version
        json extracted_data
        datetime created_at
        datetime updated_at
    }
```

### ì£¼ìš” í…Œì´ë¸” ìƒì„¸ ì„¤ëª…

#### 1. Student (í•™ìƒ ê¸°ë³¸ ì •ë³´)
```sql
CREATE TABLE students (
    id SERIAL PRIMARY KEY,
    name VARCHAR(50) NOT NULL,
    birth_date DATE,
    gender VARCHAR(10),
    address VARCHAR(200),
    current_school_name VARCHAR(100),
    current_class_info VARCHAR(50),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_student_name ON students(name);
CREATE INDEX idx_student_school ON students(current_school_name);
```

#### 2. Score (ì„±ì  ì •ë³´)
```sql
CREATE TABLE scores (
    id SERIAL PRIMARY KEY,
    student_id INTEGER REFERENCES students(id) ON DELETE CASCADE,
    grade INTEGER NOT NULL CHECK (grade >= 1 AND grade <= 6),
    semester INTEGER NOT NULL CHECK (semester >= 1 AND semester <= 2),
    curriculum VARCHAR(20) NOT NULL,  -- êµê³¼ (êµ­ì–´, ìˆ˜í•™, ì˜ì–´, ì‚¬íšŒ, ê³¼í•™)
    subject VARCHAR(50) NOT NULL,     -- ê³¼ëª©ëª… (ë¬¸í•™, ìˆ˜í•™I, ë¬¼ë¦¬í•™I)
    subject_type VARCHAR(20),         -- ê³¼ëª© ìœ í˜• (ì¼ë°˜ì„ íƒ, ì§„ë¡œì„ íƒ)
    original_subject_name VARCHAR(100), -- PDF ì›ë³¸ ê³¼ëª©ëª…
    raw_score VARCHAR(20),            -- ì›ì ìˆ˜
    subject_average VARCHAR(20),      -- ê³¼ëª©í‰ê· 
    standard_deviation VARCHAR(20),   -- í‘œì¤€í¸ì°¨
    achievement_level VARCHAR(20),    -- ì„±ì·¨ë„ (A, B, C, D, E)
    student_count VARCHAR(10),        -- ìˆ˜ê°•ììˆ˜
    grade_rank VARCHAR(10),           -- ì„ì°¨ë“±ê¸‰ (1~9ë“±ê¸‰)
    credit_hours INTEGER,             -- ë‹¨ìœ„ìˆ˜
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ì„±ëŠ¥ ìµœì í™” ì¸ë±ìŠ¤
CREATE INDEX idx_score_trend ON scores(student_id, curriculum, grade, semester);
CREATE INDEX idx_semester_scores ON scores(student_id, grade, semester);
CREATE INDEX idx_main_subjects ON scores(student_id, grade, semester, curriculum) 
    WHERE curriculum IN ('êµ­ì–´', 'ìˆ˜í•™', 'ì˜ì–´', 'ì‚¬íšŒ', 'ê³¼í•™');
```

#### 3. ë°ì´í„° íƒ€ì… ë° ì œì•½ì¡°ê±´

| í•„ë“œëª… | íƒ€ì… | ì œì•½ì¡°ê±´ | ì„¤ëª… |
|--------|------|----------|------|
| `grade` | INTEGER | 1-6 | í•™ë…„ (ì´ˆ1~ê³ 3) |
| `semester` | INTEGER | 1-2 | í•™ê¸° |
| `curriculum` | VARCHAR(20) | NOT NULL | êµê³¼ëª… |
| `achievement_level` | VARCHAR(20) | A,B,C,D,E | ì„±ì·¨ë„ |
| `grade_rank` | VARCHAR(10) | 1-9ë“±ê¸‰ | ì„ì°¨ë“±ê¸‰ |

## ğŸ— API ì•„í‚¤í…ì²˜

### ë ˆì´ì–´ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Router Layer             â”‚  â† API ì—”ë“œí¬ì¸íŠ¸ ì •ì˜
â”‚   (health, students, scores, pdf)   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           Service Layer             â”‚  â† ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚  (student_service, score_service,   â”‚
â”‚   pdf_service, database_service)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         Repository Layer            â”‚  â† ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ
â”‚ (student_repository, score_repository)â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           Model Layer               â”‚  â† ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë¸
â”‚    (Student, Score, PDFMetadata)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì£¼ìš” ì„œë¹„ìŠ¤ ëª¨ë“ˆ

#### 1. PDF Service (`app/services/pdf_service.py`)
- PDF ì—…ë¡œë“œ ë° ë©”íƒ€ë°ì´í„° ê´€ë¦¬
- AI ê¸°ë°˜ í…ìŠ¤íŠ¸ ì¶”ì¶œ ë° ë¶„ì„
- ë°ì´í„° ì •ê·œí™” ë° ê²€ì¦

#### 2. Student Service (`app/services/student_service.py`)
- í•™ìƒ CRUD operations
- ê²€ìƒ‰ ë° í•„í„°ë§
- í†µê³„ ë°ì´í„° ìƒì„±

#### 3. Score Service (`app/services/score_service.py`)
- ì„±ì  ë°ì´í„° ê´€ë¦¬
- ì„±ì  ì¶”ì´ ë¶„ì„
- í†µê³„ ë° ë¦¬í¬íŠ¸ ìƒì„±

### ë°ì´í„° í”Œë¡œìš°

```mermaid
flowchart TD
    A[PDF Upload] --> B[PDF Parser]
    B --> C[AI Text Extraction]
    C --> D[Data Classification]
    D --> E{Data Type}
    
    E -->|Student Info| F[Student Service]
    E -->|Score Data| G[Score Service]
    E -->|Attendance| H[Attendance Service]
    
    F --> I[Student Repository]
    G --> J[Score Repository]
    H --> K[Attendance Repository]
    
    I --> L[(Database)]
    J --> L
    K --> L
    
    L --> M[API Response]
```

## ğŸš€ ì„¤ì¹˜ ë° ì‹¤í–‰

### 1. ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­
- **Python**: 3.11 ì´ìƒ
- **PostgreSQL**: 13 ì´ìƒ (ìš´ì˜í™˜ê²½)
- **Memory**: ìµœì†Œ 4GB (PDF ì²˜ë¦¬ìš©)
- **Storage**: ìµœì†Œ 10GB (ì—…ë¡œë“œ íŒŒì¼ìš©)

### 2. í™˜ê²½ ì„¤ì •

#### ê°€ìƒí™˜ê²½ ìƒì„±
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# ë˜ëŠ”
venv\Scripts\activate     # Windows
```

#### ì˜ì¡´ì„± ì„¤ì¹˜
```bash
pip install -r requirements.txt
```

### 3. í™˜ê²½ë³€ìˆ˜ ì„¤ì •

#### ê¸°ë³¸ ì„¤ì • íŒŒì¼ ë³µì‚¬
```bash
cp env.example .env
```

#### í•„ìˆ˜ í™˜ê²½ë³€ìˆ˜ ì„¤ì •
```bash
# .env íŒŒì¼ í¸ì§‘
SECRET_KEY=your-super-secret-key-change-this
DATABASE_URL=postgresql://user:password@localhost:5432/libera_db
GOOGLE_AI_API_KEY=your-google-ai-api-key
ENVIRONMENT=development
```

#### í™˜ê²½ë³„ ì„¤ì • íŒŒì¼

| í™˜ê²½ | íŒŒì¼ëª… | ì„¤ëª… |
|------|--------|------|
| ê°œë°œ | `.env.development` | ë¡œì»¬ ê°œë°œìš© ì„¤ì • |
| í…ŒìŠ¤íŠ¸ | `.env.testing` | í…ŒìŠ¤íŠ¸ìš© ì„¤ì • |
| ìš´ì˜ | `.env.production` | ìš´ì˜ ì„œë²„ìš© ì„¤ì • |

### 4. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •

#### PostgreSQL ì„¤ì¹˜ ë° ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±
```bash
# PostgreSQL ì„¤ì¹˜ (Ubuntu)
sudo apt update
sudo apt install postgresql postgresql-contrib

# ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±
sudo -u postgres createdb libera_db
sudo -u postgres createuser libera_user
sudo -u postgres psql -c "ALTER USER libera_user WITH PASSWORD 'password';"
sudo -u postgres psql -c "GRANT ALL PRIVILEGES ON DATABASE libera_db TO libera_user;"
```

#### ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜
```bash
# ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
alembic upgrade head

# í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„± (ì„ íƒì‚¬í•­)
python -m app.core.init_db
```

### 5. ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰

#### ê°œë°œ í™˜ê²½
```bash
ENVIRONMENT=development uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

#### ìš´ì˜ í™˜ê²½
```bash
ENVIRONMENT=production uvicorn app.main:app --host 0.0.0.0 --port 8000 --workers 4
```

#### Docker ì‹¤í–‰ (ì„ íƒì‚¬í•­)
```bash
# Docker ì´ë¯¸ì§€ ë¹Œë“œ
docker build -t libera-app .

# ì»¨í…Œì´ë„ˆ ì‹¤í–‰
docker run -p 8000:8000 --env-file .env libera-app
```

### 6. ì„œë¹„ìŠ¤ í™•ì¸

| ì„œë¹„ìŠ¤ | URL | ì„¤ëª… |
|--------|-----|------|
| API ë¬¸ì„œ | http://localhost:8000/docs | Swagger UI |
| ëŒ€ì•ˆ ë¬¸ì„œ | http://localhost:8000/redoc | ReDoc |
| Health Check | http://localhost:8000/health | ì„œë¹„ìŠ¤ ìƒíƒœ |

## ğŸ“š API ë¬¸ì„œ

### ğŸ¥ Health Check
```http
GET /health
GET /api/v1/health/database
GET /api/v1/health/ai-service
```

### ğŸ“„ PDF ê´€ë¦¬
```http
POST   /api/v1/pdf/upload              # PDF íŒŒì¼ ì—…ë¡œë“œ
GET    /api/v1/pdf/{pdf_id}            # PDF ë©”íƒ€ë°ì´í„° ì¡°íšŒ
POST   /api/v1/pdf/{pdf_id}/process    # PDF ì²˜ë¦¬ ë° ë°ì´í„° ì¶”ì¶œ
DELETE /api/v1/pdf/{pdf_id}            # PDF ì‚­ì œ
GET    /api/v1/pdf/                    # PDF ëª©ë¡ ì¡°íšŒ
```

### ğŸ‘¥ í•™ìƒ ê´€ë¦¬
```http
GET    /api/v1/students                 # í•™ìƒ ëª©ë¡ ì¡°íšŒ
POST   /api/v1/students                 # í•™ìƒ ìƒì„±
GET    /api/v1/students/{student_id}    # í•™ìƒ ìƒì„¸ ì¡°íšŒ
PUT    /api/v1/students/{student_id}    # í•™ìƒ ì •ë³´ ìˆ˜ì •
DELETE /api/v1/students/{student_id}    # í•™ìƒ ì‚­ì œ
GET    /api/v1/students/search          # í•™ìƒ ê²€ìƒ‰
GET    /api/v1/students/statistics      # í•™ìƒ í†µê³„
```

### ğŸ“Š ì„±ì  ê´€ë¦¬
```http
GET    /api/v1/scores                           # ì„±ì  ëª©ë¡ ì¡°íšŒ
POST   /api/v1/scores                           # ì„±ì  ìƒì„±
GET    /api/v1/scores/{score_id}                # ì„±ì  ìƒì„¸ ì¡°íšŒ
PUT    /api/v1/scores/{score_id}                # ì„±ì  ìˆ˜ì •
DELETE /api/v1/scores/{score_id}                # ì„±ì  ì‚­ì œ
GET    /api/v1/scores/student/{student_id}      # í•™ìƒë³„ ì„±ì  ì¡°íšŒ
GET    /api/v1/scores/student/{student_id}/trends  # ì„±ì  ì¶”ì´ ë¶„ì„
GET    /api/v1/scores/export                    # ì„±ì  ë°ì´í„° ë‚´ë³´ë‚´ê¸°
GET    /api/v1/scores/statistics                # ì„±ì  í†µê³„
```

### API ìš”ì²­/ì‘ë‹µ ì˜ˆì‹œ

#### í•™ìƒ ìƒì„±
```json
POST /api/v1/students
{
  "name": "í™ê¸¸ë™",
  "birth_date": "2010-03-15",
  "gender": "ë‚¨",
  "address": "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬",
  "current_school_name": "OOì¤‘í•™êµ",
  "current_class_info": "1í•™ë…„ 3ë°˜"
}
```

#### ì„±ì  ì¡°íšŒ ì‘ë‹µ
```json
GET /api/v1/scores/student/1
{
  "student_id": 1,
  "student_name": "í™ê¸¸ë™",
  "total_records": 24,
  "scores": [
    {
      "id": 1,
      "grade": 1,
      "semester": 1,
      "curriculum": "êµ­ì–´",
      "subject": "êµ­ì–´",
      "raw_score": "85",
      "achievement_level": "B",
      "subject_average": "78.5",
      "grade_rank": "3"
    }
  ]
}
```

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
libera_app/
â”œâ”€â”€ app/                              # ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ 
â”‚   â”œâ”€â”€ main.py                       # FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜ ì§„ì…ì 
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                         # í•µì‹¬ ê¸°ëŠ¥ ë° ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ config.py                 # ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì • ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ constants.py              # ìƒìˆ˜ ì •ì˜ (í•™ë…„, êµê³¼ ë“±)
â”‚   â”‚   â”œâ”€â”€ pdf_config.py             # PDF ì²˜ë¦¬ ê´€ë ¨ ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ pdf_parser.py             # PDF íŒŒì‹± ì—”ì§„
â”‚   â”‚   â”œâ”€â”€ pdf_processor.py          # PDF ë°ì´í„° ì²˜ë¦¬ê¸°
â”‚   â”‚   â”œâ”€â”€ attendance_extractor.py   # ì¶œì„ ë°ì´í„° ì¶”ì¶œê¸°
â”‚   â”‚   â”œâ”€â”€ detail_extractor.py       # ì„¸ë¶€ì‚¬í•­ ì¶”ì¶œê¸°
â”‚   â”‚   â””â”€â”€ grade_extractor.py        # ì„±ì  ë°ì´í„° ì¶”ì¶œê¸°
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                       # SQLAlchemy ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ base.py                   # ê¸°ë³¸ ëª¨ë¸ í´ë˜ìŠ¤ (BaseModel)
â”‚   â”‚   â”œâ”€â”€ student.py                # í•™ìƒ ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ score.py                  # ì„±ì  ëª¨ë¸
â”‚   â”‚   â””â”€â”€ pdf_metadata.py           # PDF ë©”íƒ€ë°ì´í„° ëª¨ë¸
â”‚   â”‚
â”‚   â”œâ”€â”€ schemas/                      # Pydantic ë°ì´í„° ê²€ì¦ ìŠ¤í‚¤ë§ˆ
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ base.py                   # ê¸°ë³¸ ìŠ¤í‚¤ë§ˆ í´ë˜ìŠ¤
â”‚   â”‚   â”œâ”€â”€ student.py                # í•™ìƒ ê´€ë ¨ ìŠ¤í‚¤ë§ˆ
â”‚   â”‚   â”œâ”€â”€ scores.py                 # ì„±ì  ê´€ë ¨ ìŠ¤í‚¤ë§ˆ
â”‚   â”‚   â”œâ”€â”€ pdf.py                    # PDF ê´€ë ¨ ìŠ¤í‚¤ë§ˆ
â”‚   â”‚   â””â”€â”€ converters.py             # ë°ì´í„° ë³€í™˜ ìœ í‹¸ë¦¬í‹°
â”‚   â”‚
â”‚   â”œâ”€â”€ routers/                      # FastAPI ë¼ìš°í„° (API ì—”ë“œí¬ì¸íŠ¸)
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ health.py                 # í—¬ìŠ¤ì²´í¬ API
â”‚   â”‚   â”œâ”€â”€ students.py               # í•™ìƒ ê´€ë¦¬ API
â”‚   â”‚   â”œâ”€â”€ scores.py                 # ì„±ì  ê´€ë¦¬ API
â”‚   â”‚   â””â”€â”€ pdf.py                     # PDF ì²˜ë¦¬ API
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                     # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ database_service.py       # ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ student_service.py        # í•™ìƒ ê´€ë ¨ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ score_service.py          # ì„±ì  ê´€ë ¨ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ pdf_service.py            # PDF ì²˜ë¦¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ file_handler.py           # íŒŒì¼ ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ ì²˜ë¦¬
â”‚   â”‚   â””â”€â”€ job_service.py            # ë¹„ë™ê¸° ì‘ì—… ê´€ë¦¬
â”‚   â”‚
â”‚   â”œâ”€â”€ repositories/                 # ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ student_repository.py     # í•™ìƒ ë°ì´í„° ì ‘ê·¼
â”‚   â”‚   â””â”€â”€ score_repository.py       # ì„±ì  ë°ì´í„° ì ‘ê·¼
â”‚   â”‚
â”‚   â””â”€â”€ utils/                        # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ api_utils.py              # API ê´€ë ¨ ìœ í‹¸ë¦¬í‹°
â”‚       â”œâ”€â”€ pdf_utils.py              # PDF ì²˜ë¦¬ ìœ í‹¸ë¦¬í‹°
â”‚       â”œâ”€â”€ text_utils.py             # í…ìŠ¤íŠ¸ ì²˜ë¦¬ ìœ í‹¸ë¦¬í‹°
â”‚       â”œâ”€â”€ data_converter.py         # ë°ì´í„° ë³€í™˜ ìœ í‹¸ë¦¬í‹°
â”‚       â”œâ”€â”€ validation_utils.py       # ë°ì´í„° ê²€ì¦ ìœ í‹¸ë¦¬í‹°
â”‚       â”œâ”€â”€ student_utils.py          # í•™ìƒ ë°ì´í„° ìœ í‹¸ë¦¬í‹°
â”‚       â””â”€â”€ score_utils.py            # ì„±ì  ì²˜ë¦¬ ìœ í‹¸ë¦¬í‹°
â”‚
â”œâ”€â”€ uploads/                          # ì—…ë¡œë“œëœ íŒŒì¼ ì €ì¥ì†Œ
â”œâ”€â”€ backup_student2/                  # í…ŒìŠ¤íŠ¸ ë°ì´í„° ë°±ì—…
â”œâ”€â”€ requirements.txt                  # Python ì˜ì¡´ì„± íŒ¨í‚¤ì§€
â”œâ”€â”€ env.example                       # í™˜ê²½ë³€ìˆ˜ ì˜ˆì œ íŒŒì¼
â”œâ”€â”€ .gitignore                        # Git ì œì™¸ íŒŒì¼ ëª©ë¡
â”œâ”€â”€ run_server.py                     # ì„œë²„ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
â””â”€â”€ README.md                         # í”„ë¡œì íŠ¸ ë¬¸ì„œ
```

### ëª¨ë“ˆë³„ ì—­í•  ìƒì„¸ ì„¤ëª…

#### Core ëª¨ë“ˆ (`app/core/`)
- **config.py**: í™˜ê²½ë³€ìˆ˜, ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •, API ì„¤ì • í†µí•© ê´€ë¦¬
- **constants.py**: í•™ë…„(1-6), í•™ê¸°(1-2), êµê³¼ëª© ë“± ì‹œìŠ¤í…œ ìƒìˆ˜ ì •ì˜
- **pdf_parser.py**: PDF íŒŒì¼ ì½ê¸°, í…ìŠ¤íŠ¸/í…Œì´ë¸” ì¶”ì¶œ í•µì‹¬ ì—”ì§„
- **extractors/**: AI ê¸°ë°˜ ë°ì´í„° ë¶„ë¥˜ ë° ì¶”ì¶œ ëª¨ë“ˆë“¤

#### Models ëª¨ë“ˆ (`app/models/`)
- SQLAlchemy 2.0 ê¸°ë°˜ ë¹„ë™ê¸° ORM ëª¨ë¸
- ê´€ê³„ ì„¤ì •, ì¸ë±ìŠ¤, ì œì•½ì¡°ê±´ ì •ì˜
- ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆì™€ 1:1 ë§¤í•‘

#### Services ëª¨ë“ˆ (`app/services/`)
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì˜ í•µì‹¬ êµ¬í˜„
- Repository íŒ¨í„´ì„ í†µí•œ ë°ì´í„° ì ‘ê·¼
- íŠ¸ëœì­ì…˜ ê´€ë¦¬ ë° ì—ëŸ¬ ì²˜ë¦¬

#### Routers ëª¨ë“ˆ (`app/routers/`)
- RESTful API ì—”ë“œí¬ì¸íŠ¸ ì •ì˜
- ìš”ì²­/ì‘ë‹µ ìŠ¤í‚¤ë§ˆ ì—°ê²°
- HTTP ìƒíƒœ ì½”ë“œ ë° ì˜ˆì™¸ ì²˜ë¦¬

## ğŸ‘¨â€ğŸ’» ê°œë°œ ê°€ì´ë“œ

### ì½”ë“œ ìŠ¤íƒ€ì¼ ë° í’ˆì§ˆ

#### ìë™ í¬ë§·íŒ…
```bash
# ì½”ë“œ í¬ë§·íŒ… (Black)
black app/ --line-length 88

# Import ì •ë ¬ (isort)
isort app/ --profile black

# íƒ€ì… ì²´í¬ (MyPy)
mypy app/ --ignore-missing-imports
```

#### ë¦°íŒ…
```bash
# Flake8 (PEP8 ì¤€ìˆ˜)
flake8 app/ --max-line-length=88 --extend-ignore=E203,W503

# ë³´ì•ˆ ê²€ì‚¬ (Bandit)
bandit -r app/ -f json -o security-report.json
```

### í…ŒìŠ¤íŠ¸

#### í…ŒìŠ¤íŠ¸ ì‹¤í–‰
```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
pytest

# ì»¤ë²„ë¦¬ì§€ í¬í•¨ ì‹¤í–‰
pytest --cov=app --cov-report=html --cov-report=term

# íŠ¹ì • ëª¨ë“ˆ í…ŒìŠ¤íŠ¸
pytest tests/test_student_service.py -v

# ë³‘ë ¬ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
pytest -n auto
```

#### í…ŒìŠ¤íŠ¸ êµ¬ì¡°
```
tests/
â”œâ”€â”€ unit/                    # ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ test_models.py
â”‚   â”œâ”€â”€ test_services.py
â”‚   â””â”€â”€ test_utils.py
â”œâ”€â”€ integration/             # í†µí•© í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ test_api.py
â”‚   â””â”€â”€ test_database.py
â””â”€â”€ fixtures/                # í…ŒìŠ¤íŠ¸ ë°ì´í„°
    â”œâ”€â”€ sample_pdfs/
    â””â”€â”€ test_data.json
```

### ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜

#### ìƒˆ ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒì„±
```bash
# ëª¨ë¸ ë³€ê²½ í›„ ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ìƒì„±
alembic revision --autogenerate -m "Add attendance table"

# ë¹ˆ ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ìƒì„±
alembic revision -m "Custom migration"
```

#### ë§ˆì´ê·¸ë ˆì´ì…˜ ê´€ë¦¬
```bash
# í˜„ì¬ ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒíƒœ í™•ì¸
alembic current

# ë§ˆì´ê·¸ë ˆì´ì…˜ ì´ë ¥ í™•ì¸
alembic history --verbose

# íŠ¹ì • ë²„ì „ìœ¼ë¡œ ë¡¤ë°±
alembic downgrade -1
alembic downgrade base

# íŠ¹ì • ë²„ì „ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œ
alembic upgrade head
alembic upgrade +2
```

### API ê°œë°œ ê°€ì´ë“œ

#### ìƒˆ API ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€
1. **ìŠ¤í‚¤ë§ˆ ì •ì˜** (`app/schemas/`)
```python
class NewFeatureCreate(BaseModel):
    name: str = Field(..., max_length=100)
    description: Optional[str] = None
```

2. **ëª¨ë¸ ì •ì˜** (`app/models/`)
```python
class NewFeature(BaseModel):
    __tablename__ = "new_features"
    
    name: Mapped[str] = mapped_column(String(100), nullable=False)
    description: Mapped[Optional[str]] = mapped_column(Text, nullable=True)
```

3. **ì„œë¹„ìŠ¤ ë¡œì§** (`app/services/`)
```python
class NewFeatureService:
    def __init__(self, db: AsyncSession):
        self.db = db
    
    async def create(self, data: NewFeatureCreate) -> NewFeature:
        # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ êµ¬í˜„
        pass
```

4. **ë¼ìš°í„° ë“±ë¡** (`app/routers/`)
```python
@router.post("/", response_model=NewFeatureResponse)
async def create_feature(
    data: NewFeatureCreate,
    db: AsyncSession = Depends(get_db)
):
    service = NewFeatureService(db)
    return await service.create(data)
```

### ì„±ëŠ¥ ìµœì í™”

#### ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”
- **ì¸ë±ìŠ¤ í™œìš©**: ìì£¼ ì¡°íšŒë˜ëŠ” ì»¬ëŸ¼ì— ì¸ë±ìŠ¤ ìƒì„±
- **N+1 ì¿¼ë¦¬ ë°©ì§€**: `selectinload()`, `joinedload()` ì‚¬ìš©
- **ë°°ì¹˜ ì²˜ë¦¬**: ëŒ€ëŸ‰ ë°ì´í„° ì²˜ë¦¬ì‹œ ë°°ì¹˜ ë‹¨ìœ„ë¡œ ë¶„í• 

#### ë¹„ë™ê¸° ì²˜ë¦¬
```python
# ë™ì‹œ ì²˜ë¦¬ ì˜ˆì‹œ
async def process_multiple_pdfs(pdf_files: List[UploadFile]):
    tasks = [process_pdf(pdf) for pdf in pdf_files]
    results = await asyncio.gather(*tasks, return_exceptions=True)
    return results
```

## ğŸš€ ë°°í¬ ê°€ì´ë“œ

### Docker ë°°í¬

#### Dockerfile
```dockerfile
FROM python:3.11-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

EXPOSE 8000

CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8000"]
```

#### Docker Compose
```yaml
version: '3.8'
services:
  web:
    build: .
    ports:
      - "8000:8000"
    environment:
      - DATABASE_URL=postgresql://user:pass@db:5432/libera_db
    depends_on:
      - db
  
  db:
    image: postgres:13
    environment:
      POSTGRES_DB: libera_db
      POSTGRES_USER: user
      POSTGRES_PASSWORD: pass
    volumes:
      - postgres_data:/var/lib/postgresql/data

volumes:
  postgres_data:
```

### ìš´ì˜ í™˜ê²½ ë°°í¬

#### ì‹œìŠ¤í…œ ì„œë¹„ìŠ¤ ë“±ë¡ (Linux)
```bash
# systemd ì„œë¹„ìŠ¤ íŒŒì¼ ìƒì„±
sudo nano /etc/systemd/system/libera-app.service
```

```ini
[Unit]
Description=Libera FastAPI App
After=network.target

[Service]
Type=exec
User=www-data
Group=www-data
WorkingDirectory=/opt/libera-app
Environment=PATH=/opt/libera-app/venv/bin
ExecStart=/opt/libera-app/venv/bin/uvicorn app.main:app --host 0.0.0.0 --port 8000
Restart=always

[Install]
WantedBy=multi-user.target
```

```bash
# ì„œë¹„ìŠ¤ í™œì„±í™”
sudo systemctl daemon-reload
sudo systemctl enable libera-app
sudo systemctl start libera-app
```

#### Nginx ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ ì„¤ì •
```nginx
server {
    listen 80;
    server_name yourdomain.com;

    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

## ğŸ”§ ë¬¸ì œ í•´ê²°

### ì¼ë°˜ì ì¸ ë¬¸ì œë“¤

#### 1. PDF ì²˜ë¦¬ ì‹¤íŒ¨
```bash
# ì›ì¸ ì§„ë‹¨
- PDF íŒŒì¼ í˜•ì‹ í™•ì¸ (ì§€ì›: PDF 1.4-1.7)
- íŒŒì¼ í¬ê¸° í™•ì¸ (ê¶Œì¥: 50MB ì´í•˜)
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ í™•ì¸
- Google AI API í‚¤ ìœ íš¨ì„± í™•ì¸
- API í• ë‹¹ëŸ‰ í™•ì¸

# í•´ê²° ë°©ë²•
- PDF íŒŒì¼ ìµœì í™”
- ë©”ëª¨ë¦¬ ì¦ì„¤ ë˜ëŠ” ì²­í¬ ë‹¨ìœ„ ì²˜ë¦¬
- API í‚¤ ê°±ì‹ 
```

#### 2. ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì˜¤ë¥˜
```bash
# ì›ì¸ ì§„ë‹¨
- DATABASE_URL í™˜ê²½ë³€ìˆ˜ í™•ì¸
- PostgreSQL ì„œë²„ ìƒíƒœ í™•ì¸
- ë„¤íŠ¸ì›Œí¬ ì—°ê²° í™•ì¸
- ë°©í™”ë²½ ì„¤ì • í™•ì¸

# í•´ê²° ë°©ë²•
psql -h localhost -U username -d database_name
sudo systemctl status postgresql
sudo ufw allow 5432
```

#### 3. AI API ì˜¤ë¥˜
```bash
# ì›ì¸ ì§„ë‹¨ ë° í•´ê²°
- API í‚¤ í™•ì¸: echo $GOOGLE_AI_API_KEY
- í• ë‹¹ëŸ‰ í™•ì¸: Google Cloud Console
- ë„¤íŠ¸ì›Œí¬ í™•ì¸: curl -I https://generativelanguage.googleapis.com
```

### ë¡œê·¸ ë¶„ì„

#### ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸
```bash
# ì‹¤ì‹œê°„ ë¡œê·¸ í™•ì¸
tail -f logs/app.log

# ì—ëŸ¬ ë¡œê·¸ë§Œ í•„í„°ë§
grep "ERROR" logs/app.log | tail -20

# íŠ¹ì • ê¸°ê°„ ë¡œê·¸ í™•ì¸
journalctl -u libera-app --since "2024-01-01" --until "2024-01-02"
```

#### ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
```bash
# ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
ps aux | grep uvicorn
free -h

# CPU ì‚¬ìš©ë¥ 
top -p $(pgrep -f uvicorn)

# ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°
sudo -u postgres psql -c "SELECT * FROM pg_stat_activity;"
```

## ğŸ“ ì§€ì› ë° ë¬¸ì˜

- **ê°œë°œíŒ€ ì´ë©”ì¼**: dev@libera.com
- **ì´ìŠˆ íŠ¸ë˜í‚¹**: GitHub Issues
- **ë¬¸ì„œ ì—…ë°ì´íŠ¸**: ê°œë°œíŒ€ì› ëˆ„êµ¬ë‚˜ ê¸°ì—¬ ê°€ëŠ¥

---

**Last Updated**: 2024ë…„ 1ì›”  
**Version**: 2.0.0  
**Maintainer**: Libera Development Team
